<!--
Page for admin viewing and management of tutor onboarding data.

@author Keller Flint
-->

<include href="views/navbar.html"/>

<div class="content">

    <!-- Title and year info/controls -->
    <div class="text-center">
        <h1>Tutor Onboarding</h1>
        <button class="btn btn-secondary year-change" id="year-last">Last Year</button>
        <h3 class="d-inline" id="year-current" data-year='{{ @year }}'>{{ @year }} - {{@year+1}}</h3>
        <button class="btn btn-secondary year-change" id="year-next">Next Year</button>
        <br>
        <check if="{{ @currentYear != @year }}">
            <button id="current-year" class="btn btn-info mt-3">Set Current Year</button>
        </check>
        <br>
        <button id="enable-edit" class="btn btn-outline-primary text-left">Edit Columns</button>
        <a id="add-new-item" class="btn btn-outline-primary" href="../edit/0">Add Column</a>
        <br>

        <!-- Filter buttons -->
        <div class="mt-3">
            <input type="hidden" value="{{ @status }}" id="status">
            <check if="{{ @status == 'incomplete' }}">
                <true>
                    <button class="btn btn-primary filter">Incomplete</button>
                </true>
                <false>
                    <a href="../tutors/{{ @year }}&incomplete" class="btn btn-secondary filter">Incomplete</a>
                </false>
            </check>
            <check if="{{ @status == 'all' }}">
                <true>
                    <button class="btn btn-primary filter">All</button>
                </true>
                <false>
                    <a href="../tutors/{{ @year }}&all" class="btn btn-secondary filter">All</a>
                </false>
            </check>
            <check if="{{ @status == 'complete' }}">
                <true>
                    <button class="btn btn-primary filter">Complete</button>
                </true>
                <false>
                    <a href="../tutors/{{ @year }}&complete" class="btn btn-secondary filter">Complete</a>
                </false>
            </check>
        </div>
    </div>

    <!-- Tutors DataTable -->
    <table id="tutors-table" class="compact stripe">
        <thead>
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Bio</th>
            <th>Picture</th>
            <repeat group="{{ @items }}" value="{{ @item }}">
                <th>{{ @item['item_name'] }}<br>
                    <a class="edit-item btn btn-info d-none" href="../edit/{{ @item['item_id'] }}">Edit</a>
                </th>
            </repeat>
        </tr>
        </thead>
        <tbody>
        <repeat group="{{ @tutorsData }}" value=" {{ @tutor }}">
            <tr>
                <!-- Name -->
                <td class="name"><a href="../tutor/{{ @tutor['user_id'] }}">{{ @tutor['tutor_first'] }} {{
                    @tutor['tutor_last'] }}</a></td>

                <!-- Email -->
                <td class="email">
                    {{ @tutor['user_email'] }}
                    <i class="fa fa-caret-down float-right" style="font-size:18px"></i>
                    <br>
                    <check if="{{ @currentYear != @year }}">
                        <button class="btn btn-info d-none import" data-userid="{{ @tutor['user_id'] }}">Import</button>
                    </check>
                    <button class="btn btn-danger d-none delete" data-userid="{{ @tutor['user_id'] }}">Delete</button>
                </td>
                <td>
                    <check if="{{ @tutor['tutor_image'] != NULL }}">
                        <true>
                            <input type="checkbox" checked disabled>
                        </true>
                        <false>
                            <input type="checkbox" disabled>
                        </false>
                    </check>
                </td>
        </repeat>
        </tbody>
    </table>

    <!-- Add new tutor email input and button -->
    <div class="text-primary text-center" id="email-status"></div>
    <div class="row">
        <div class="col-4"></div>
        <div class="col-3 text-center px-1">
            <div class="form-group">
                <input type="text" id="add-tutor-input" class="form-control" placeholder="someone@example.com">
            </div>
        </div>
        <div class="col-4 px-1">
            <button data-year="{{ @year }}" id="add-tutor-button" class="btn btn-success">Add Tutor</button>
        </div>
        <div class="col-4"></div>
    </div>
</div>

<!--JQuery and bootstrap dependencies-->
<script
        src="https://code.jquery.com/jquery-3.5.0.min.js"
        integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ="
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>

<!-- DataTables -->
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>

<script src="../scripts/tutorsScript.js"></script>
</body>
</html>